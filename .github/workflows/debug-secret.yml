name: Debug GitHub Secret

on:
  workflow_dispatch:

jobs:
  debug:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Debug NOTION_API secret
      env:
        NOTION_API: ${{ secrets.NOTION_API }}
      run: |
        echo "Checking if NOTION_API secret is available..."
        if [ -n "$NOTION_API" ]; then
          echo "✅ NOTION_API secret is set"
          echo "Length: ${#NOTION_API}"
          echo "First 50 chars: ${NOTION_API:0:50}"
        else
          echo "❌ NOTION_API secret is NOT set"
        fi
        
        echo ""
        echo "All secrets available:"
        echo "NOTION_API: $NOTION_API"
        
    - name: Run debug script
      env:
        NOTION_API: ${{ secrets.NOTION_API }}
      run: |
        python debug.py 